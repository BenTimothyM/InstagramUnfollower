# Instagram Unfollowers

[![Maintenance](https://img.shields.io/maintenance/yes/2023)](https://github.com/davidarroyo1234/InstagramUnfollowers)

A nifty tool that lets you see who doesn't follow you back on Instagram.  
<u>Browser-based and requires no downloads or installations!</u>

## **WARNING**

This version utilizes the Instagram API for better performance.  
If you prefer to use the older version please use this [commit](https://github.com/davidarroyo1234/InstagramUnfollowers/tree/50a0bcbc9fe349b8664a74c0e4477bc974d0352b).

## Usage

### Steps:

1.  Copy the following code

```js
"use strict";var __awaiter=this&&this.__awaiter||function(e,n,t,r){return new(t||(t=Promise))((function(o,s){function a(e){try{l(r.next(e))}catch(e){s(e)}}function i(e){try{l(r.throw(e))}catch(e){s(e)}}function l(e){var n;e.done?o(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(a,i)}l((r=r.apply(e,n||[])).next())}))},__generator=this&&this.__generator||function(e,n){var t,r,o,s,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return s={next:i(0),throw:i(1),return:i(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function i(i){return function(l){return function(i){if(t)throw new TypeError("Generator is already executing.");for(;s&&(s=0,i[0]&&(a=0)),a;)try{if(t=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=n.call(e,a)}catch(e){i=[6,e],r=0}finally{t=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,l])}}},__spreadArray=this&&this.__spreadArray||function(e,n,t){if(t||2===arguments.length)for(var r,o=0,s=n.length;o<s;o++)!r&&o in n||(r||(r=Array.prototype.slice.call(n,0,o)),r[o]=n[o]);return e.concat(r||Array.prototype.slice.call(n))},INSTAGRAM_HOSTNAME="www.instagram.com",UNFOLLOWERS_PER_PAGE=3,nonFollowersList=[],userIdsToUnfollow=[],isActiveProcess=!1,currentPage=1;function sleep(e){return new Promise((function(n){setTimeout(n,e)}))}function getCookie(e){var n="; ".concat(document.cookie).split("; ".concat(e,"="));if(2===n.length)return n.pop().split(";").shift()}function afterUrlGenerator(e){var n=getCookie("ds_user_id");return'https://www.instagram.com/graphql/query/?query_hash=3dec7e2c57367ef3da3d987d89f9dbc8&variables={"id":"'.concat(n,'","include_reel":"true","fetch_mutual":"false","first":"24","after":"').concat(e,'"}')}function unfollowUserUrlGenerator(e){return"https://www.instagram.com/web/friendships/".concat(e,"/unfollow/")}function getElementByClass(e){var n=document.querySelector(e);if(null===n)throw new Error("Unable to find element by class: ".concat(e));return n}function getUserById(e){var n=nonFollowersList.find((function(n){return n.id.toString()===e.toString()}));return void 0===n&&console.error("Unable to find user by id: ".concat(e)),n}function copyListToClipboard(){var e=__spreadArray([],nonFollowersList,!0).sort((function(e,n){return e.username>n.username?1:-1})),n="";e.forEach((function(e){n+=e.username+"\n"})),copyToClipboard(n)}function copyToClipboard(e){return __awaiter(this,void 0,void 0,(function(){return __generator(this,(function(n){switch(n.label){case 0:return[4,navigator.clipboard.writeText(e)];case 1:return n.sent(),alert("List copied to clipboard!"),[2]}}))}))}function onToggleUser(){getElementByClass(".selected-user-count").innerHTML="[".concat(userIdsToUnfollow.length,"]")}function toggleUser(e){userIdsToUnfollow=-1===userIdsToUnfollow.indexOf(e)?__spreadArray(__spreadArray([],userIdsToUnfollow,!0),[e],!1):userIdsToUnfollow.filter((function(n){return n!==e})),onToggleUser()}function toggleAllUsers(e){void 0===e&&(e=!1),document.querySelectorAll(".account-checkbox").forEach((function(n){return n.checked=e})),userIdsToUnfollow=e?nonFollowersList.map((function(e){return parseInt(e.id,10)})):[],onToggleUser()}function refreshPagination(){document.getElementById("current-page").innerHTML=currentPage,document.getElementById("last-page").innerHTML=getMaxPage()}function renderResults(){refreshPagination(),getElementByClass(".toggle-all-checkbox").disabled=!1;var e=getElementByClass(".results-container");e.innerHTML="";var n="";getCurrentPageUnfollowers().forEach((function(t){var r=-1!==userIdsToUnfollow.indexOf(parseInt(t.id,10)),o=t.username.substring(0,1).toUpperCase();n!==o&&(n=o,e.innerHTML+="<div class='alphabet-character'>".concat(n,"</div>")),e.innerHTML+="<label class='result-item'>\n            <div class='flex grow align-center'>\n                <img class='avatar' alt=\"\" src=".concat(t.profile_pic_url," />&nbsp;&nbsp;&nbsp;&nbsp;\n                <div class='flex column'>\n                    <a class='fs-xlarge' target='_blank' href='../").concat(t.username,"'>").concat(t.username,"</a>\n                    <span class='fs-medium'>").concat(t.full_name,"</span>\n                </div>\n                ").concat(t.is_verified?"&nbsp;&nbsp;&nbsp;<div class='verified-badge'>✔</div>":"","\n                ").concat(t.is_private?"<div class='flex justify-center w-100'>\n                            <span class='private-indicator'>Private</span>\n                          </div>":"","\n            </div>\n            <input\n                class='account-checkbox'\n                type='checkbox'\n                onchange='toggleUser(").concat(t.id,")'\n                ").concat(r?"checked":""," />\n        </label>")}))}function run(e){return __awaiter(this,void 0,void 0,(function(){return __generator(this,(function(n){switch(n.label){case 0:return getElementByClass(".run-scan").remove(),getElementByClass(".include-verified-checkbox").disabled=!0,[4,getNonFollowersList(e)];case 1:return n.sent(),getElementByClass(".copy-list").disabled=!1,[2]}}))}))}function renderOverlay(){var e=!0;document.body.innerHTML="\n        <main class='iu'>\n            <div class='overlay'>\n                <header class='top-bar'>\n                    <div class='logo' onclick='location.reload()'>InstagramUnfollowers</div>\n                    <label class='flex align-center'>\n                        <input type='checkbox' class='include-verified-checkbox' ".concat(e?"checked":""," /> Include verified\n                    </label>\n                    <button class='copy-list' onclick='copyListToClipboard()' disabled>COPY LIST</button>\n                    <button class='fs-large clr-red' onclick='unfollow()'>UNFOLLOW <span class='selected-user-count'>[0]</span></button>\n                    <input type='checkbox' class='toggle-all-checkbox' onclick='toggleAllUsers(this.checked)' disabled />\n                </header>\n\n                <button class='run-scan'>RUN</button>\n                <div class='results-container'></div>\n\n                <footer class='bottom-bar'>\n                    <div>Non-followers: <span class='nonfollower-count' /></div>\n                    <div>\n                        <a onclick='previousPage()' class='p-medium'>❮</a>\n                        <span id='current-page'>1</span>&nbsp;/&nbsp;<span id='last-page'>1</span>\n                        <a onclick='nextPage()' class='p-medium'>❯</a>\n                    </div>\n                    <div class='progressbar-container'>\n                        <div class='progressbar-bar'></div>\n                        <span class='progressbar-text'>0%</span>\n                    </div>\n                </footer>\n            </div>\n            <div class='toast toast-hidden'></div>\n        </main>"),getElementByClass(".run-scan").addEventListener("click",(function(){return run(e)})),getElementByClass(".include-verified-checkbox").addEventListener("change",(function(){return e=!e}))}function getNonFollowersList(e){return void 0===e&&(e=!0),__awaiter(this,void 0,void 0,(function(){var n,t,r,o,s,a,i,l,c,u,d,f,g,p;return __generator(this,(function(h){switch(h.label){case 0:if(isActiveProcess)return[2];n=[],t=!0,r=0,o=0,s=-1,isActiveProcess=!0,a=getCookie("ds_user_id"),i='https://www.instagram.com/graphql/query/?query_hash=3dec7e2c57367ef3da3d987d89f9dbc8&variables={"id":"'.concat(a,'","include_reel":"true","fetch_mutual":"false","first":"24"}'),l=getElementByClass(".progressbar-bar"),c=getElementByClass(".progressbar-text"),u=getElementByClass(".nonfollower-count"),d=getElementByClass(".toast"),h.label=1;case 1:if(!t)return[3,9];f=void 0,h.label=2;case 2:return h.trys.push([2,4,,5]),[4,fetch(i).then((function(e){return e.json()}))];case 3:return f=h.sent(),[3,5];case 4:return g=h.sent(),console.error(g),[3,1];case 5:return-1===s&&(s=f.data.user.edge_follow.count),t=f.data.user.edge_follow.page_info.has_next_page,i=afterUrlGenerator(f.data.user.edge_follow.page_info.end_cursor),o+=f.data.user.edge_follow.edges.length,f.data.user.edge_follow.edges.forEach((function(t){!e&&t.node.is_verified||t.node.follows_viewer||n.push(t.node)})),p="".concat(Math.ceil(o/s*100),"%"),c.innerHTML=p,l.style.width=p,u.innerHTML=n.length.toString(),nonFollowersList=n,renderResults(),[4,sleep(Math.floor(400*Math.random())+1e3)];case 6:return h.sent(),++r>6?(r=0,d.classList.remove("toast-hidden"),d.innerHTML="Sleeping 10 secs to prevent getting temp blocked...",[4,sleep(1e4)]):[3,8];case 7:h.sent(),h.label=8;case 8:return d.classList.add("toast-hidden"),[3,1];case 9:return l.style.backgroundColor="#59A942",c.innerHTML="DONE",isActiveProcess=!1,[2,n]}}))}))}function unfollow(){return __awaiter(this,void 0,void 0,(function(){var e,n,t,r,o,s,a,i,l,c,u,d,f;return __generator(this,(function(g){switch(g.label){case 0:if(isActiveProcess)return[2];if(0===userIdsToUnfollow.length)return alert("Must select at least a single user to unfollow"),[2];if(!confirm("Are you sure?"))return[2];if(void 0===(e=getCookie("csrftoken")))throw new Error("csrftoken cookie is undefined");n=getElementByClass(".toast"),t=getElementByClass(".progressbar-bar"),r=getElementByClass(".progressbar-text"),getElementByClass(".toggle-all-checkbox").disabled=!0,(o=getElementByClass(".results-container")).innerHTML="",s=function(){return window.scrollTo(0,o.scrollHeight)},r.innerHTML="0%",t.style.width="0%",isActiveProcess=!0,a=0,i=0,l=userIdsToUnfollow,g.label=1;case 1:if(!(i<l.length))return[3,10];c=l[i],u=getUserById(c),g.label=2;case 2:return g.trys.push([2,4,,5]),[4,fetch(unfollowUserUrlGenerator(c),{headers:{"content-type":"application/x-www-form-urlencoded","x-csrftoken":e},method:"POST",mode:"cors",credentials:"include"})];case 3:return g.sent(),o.innerHTML+="<div class='p-medium'>Unfollowed\n                <a class='clr-inherit' target='_blank' href='../".concat(u.username,"'> ").concat(u.username,"</a>\n                <span class='clr-cyan'> [").concat(a+1,"/").concat(userIdsToUnfollow.length,"]</span>\n            </div>"),[3,5];case 4:return d=g.sent(),console.error(d),o.innerHTML+="<div class='p-medium clr-red'>Failed to unfollow ".concat(u.username," [").concat(a+1,"/").concat(userIdsToUnfollow.length,"]</div>"),[3,5];case 5:return a+=1,f="".concat(Math.ceil(a/userIdsToUnfollow.length*100),"%"),r.innerHTML=f,t.style.width=f,s(),c===userIdsToUnfollow[userIdsToUnfollow.length-1]?[3,10]:[4,sleep(Math.floor(2e3*Math.random())+4e3)];case 6:return g.sent(),a%5!=0?[3,8]:(n.classList.remove("toast-hidden"),n.innerHTML="Sleeping 5 minutes to prevent getting temp blocked...",s(),[4,sleep(3e5)]);case 7:g.sent(),g.label=8;case 8:n.classList.add("toast-hidden"),g.label=9;case 9:return i++,[3,1];case 10:return t.style.backgroundColor="#59A942",r.innerHTML="DONE",isActiveProcess=!1,o.innerHTML+="<hr /><div class='fs-large p-medium clr-green'>All DONE!</div><hr />",s(),[2]}}))}))}function init(){location.hostname===INSTAGRAM_HOSTNAME?(document.title="InstagramUnfollowers",renderOverlay()):alert("Can be used only on Instagram routes")}function getMaxPage(){var e=Math.ceil(nonFollowersList.length/UNFOLLOWERS_PER_PAGE);return e<1?1:e}function nextPage(){currentPage<getMaxPage()&&(currentPage++,renderResults())}function getCurrentPageUnfollowers(){return __spreadArray([],nonFollowersList,!0).sort((function(e,n){return e.username>n.username?1:-1})).splice(UNFOLLOWERS_PER_PAGE*(currentPage-1),UNFOLLOWERS_PER_PAGE)}function previousPage(){currentPage-1>0&&(currentPage--,renderResults())}window.addEventListener("beforeunload",(function(e){if(isActiveProcess)return(e=e||window.event)&&(e.returnValue="Changes you made may not be saved."),"Changes you made may not be saved."})),init();const styleMarkup="html {\n  background-color: #222 !important; }\n  html .iu {\n    margin-bottom: 10rem;\n    font-family: system-ui; }\n    html .iu .overlay {\n      background-color: #222;\n      color: #fff;\n      height: 100%; }\n    html .iu header.top-bar {\n      position: fixed;\n      top: 0;\n      left: 0;\n      right: 0;\n      display: flex;\n      align-items: center;\n      justify-content: space-between;\n      padding: 1rem;\n      height: 2.5rem;\n      background-color: #333;\n      z-index: 1; }\n    html .iu header .logo {\n      font-family: monospace;\n      font-size: 1.5em;\n      cursor: pointer; }\n    html .iu footer.bottom-bar {\n      position: fixed;\n      bottom: 0;\n      left: 0;\n      right: 0;\n      display: flex;\n      align-items: center;\n      justify-content: space-between;\n      padding: 1rem;\n      background-color: #000;\n      font-weight: bold;\n      z-index: 1; }\n    html .iu label {\n      cursor: pointer; }\n    html .iu input[type='checkbox'] {\n      height: 1.1rem;\n      width: 1.1rem; }\n    html .iu a {\n      color: inherit;\n      text-decoration-color: transparent;\n      transition: text-decoration-color 0.1s;\n      cursor: pointer; }\n      html .iu a:hover {\n        text-decoration-color: inherit; }\n    html .iu button {\n      background: none;\n      border: none;\n      padding: 0;\n      cursor: pointer; }\n      html .iu button.copy-list {\n        color: white;\n        font-size: 1rem; }\n      html .iu button.run-scan {\n        position: absolute;\n        left: 50%;\n        top: 50%;\n        transform: translate(-50%, -50%);\n        font-size: 2em;\n        color: white;\n        border: 1px solid white;\n        height: 160px;\n        width: 160px;\n        border-radius: 50%; }\n    html .iu .progressbar-container {\n      width: 175px;\n      height: 30px;\n      border-radius: 5px;\n      position: relative;\n      border: 1px solid #7b7777; }\n    html .iu .progressbar-bar {\n      width: 0;\n      height: 100%;\n      background-color: #7b7777; }\n    html .iu .progressbar-text {\n      position: absolute;\n      top: 50%;\n      left: 50%;\n      transform: translate(-50%, -50%); }\n    html .iu .results-container {\n      transform: translateY(75px); }\n      html .iu .results-container .alphabet-character {\n        margin: 1rem;\n        padding: 1rem;\n        font-size: 2em;\n        border-bottom: 1px solid #333; }\n      html .iu .results-container .result-item {\n        display: flex;\n        align-items: center;\n        padding: 1rem;\n        border-radius: 3px;\n        cursor: pointer; }\n        html .iu .results-container .result-item .avatar {\n          width: 75px;\n          border-radius: 50%; }\n        html .iu .results-container .result-item .verified-badge {\n          background-color: #49adf4;\n          border-radius: 50%;\n          padding: 0.2rem 0.3rem;\n          font-size: 0.45em;\n          height: fit-content;\n          transform: translateY(-15px); }\n        html .iu .results-container .result-item .private-indicator {\n          border: 2px solid #51bb42;\n          border-radius: 25px;\n          padding: 0.5rem;\n          color: #51bb42;\n          font-weight: 500; }\n  html .toast {\n    position: fixed;\n    bottom: 5rem;\n    color: black;\n    background-color: #fff;\n    border-radius: 6px;\n    font-size: 1.25em;\n    padding: 2rem;\n    transition: transform 0.2s;\n    z-index: 2; }\n    html .toast-hidden {\n      transform: translateX(-999rem); }\n\n/** HELPERS */\n.flex {\n  display: flex; }\n  .flex.align-center {\n    align-items: center; }\n  .flex.justify-center {\n    justify-content: center; }\n  .flex.column {\n    flex-direction: column; }\n\n.grow {\n  flex: 1; }\n\n.w-100 {\n  width: 100%; }\n\n.p-small {\n  padding: 0.5rem; }\n\n.p-medium {\n  padding: 1rem; }\n\n.p-large {\n  padding: 1.5rem; }\n\n.p-xlarge {\n  padding: 2rem; }\n\n.fs-small {\n  font-size: 0.5rem; }\n\n.fs-medium {\n  font-size: 1rem; }\n\n.fs-large {\n  font-size: 1.5rem; }\n\n.fs-xlarge {\n  font-size: 2rem; }\n\n.clr-inherit {\n  color: inherit; }\n\n.clr-red {\n  color: #bd2121; }\n\n.clr-green {\n  color: #56d756; }\n\n.clr-cyan {\n  color: #00ffff; }\n\n.d-none {\n  display: none; }\n",elStyle=document.createElement("style");elStyle.innerHTML=styleMarkup,document.head.appendChild(elStyle);

```
2. Log in into your account and open the developer console or (Ctrl+Shift+J(Windows) || ⌘+⌥+I (Mac os)) and paste the code.

3.  You will be met with the following interface:

    <img src="./assets/main.png" alt="main" width="100%" />

4.  Click "RUN" to start scanning for users who do not follow you back.
5.  Once it finishes printing the users, you will be met with the following screen which will show you the results:

    <img src="./assets/results.png" alt="main" width="100%" />

6.  If you wish to un-follow any of these users, you can select 1 or more of them via the checkbox next to each user.

## Notes

**_The more users you have to check, more time it will take_**

**_This script has been tested only on Chromium-based browsers_**

## DEV

When introducing new changes to `main.js`, make sure to run the "build" command in-order to automatically format, compress, and convert your code.

## Legal

**Disclaimer:** This is not affiliated, associated, authorized, endorsed by, or in any way officially connected with Instagram.

Use it at your own risk!.
